1. Построение программ
1.1. Алфавит языка
Как и любой язык программирования, C/C++ имеет свой алфавит – набор
символов, разрешенных к использованию и воспринимаемых компилятором.
В алфавит языка входят:
1. Латинские строчные и прописные буквы:
A, B, C,…, Z и a, b, c,…,z.
2. Цифры от 0 до 9.
3. Специальные символы, участвующие в построении конструкций языка:
+ - * / = < > [ ] . , ( ) : ; ^ @ { } $ # ‘ ? % !
1.2. Имена и зарезервированные слова
Текст программы записывается при помощи латинских букв, цифр и
знаков. Буквы допускаются прописные и строчные. Особую роль в тексте
программы имеют имена и зарезервированные слова.
Имена применяют для обозначения переменных, констант и других
объектов, определенных в программе. Имя может состоять из любого
количества букв или цифр, но должно начинаться с буквы. В имя можно
включать знак подчеркивания. Прописные и строчные буквы различаются.
Программу легче понять, если имена подбираются так, чтобы в них
отражался смысл обозначаемых данных. Например, сумму чисел обозначают
через S или summa, максимальное значение max и т.п.
C/C++ имеет большое количество зарезервированных (ключевых)
слов. Эти слова не могут быть использованы в качестве идентификаторов
(имен) в программе.
Список ключевых слов таков:
asm
auto
bool
break
case
catch
char
class
const
const_cast
continue
default
delete
do
double
dynamic_cast
else
enum
explicit
export
extern
false
float
for
friend
goto
if
inline
int
long
mutable
namespace
new
operator
private
protected
public
register
reinterpret_cast
return
short
signed
sizeof
static
static_cast
struct
switch
template
this
throw
true
try
typedef
typeid
typename
union
unsigned
using
virtual
void
volatile
wcahr_t
while
1.3. Общая структура программ
Начнем знакомство с C/C++ с программы, которая вводит два целых
числа с клавиатуры, складывает их и выводит сумму заданных чисел на
экран.
#include <stdio.h>;
void main()
{
int a, b, s;
scanf(”%i%i”,&a,&b);
 s=a+b;
printf(”s=%i”,s);
}
включение заголовочного файла
описание функции main
начало функции
описание переменных
ввод значений a и b
вычисление суммы
вывод на экран
конец функции
На этом примере видны основные особенности записи программ:
1. Первая строка этой программы – директива препроцессора, по которой
в текст программы вставляется заголовочный файл <stdio.h>,
содержащий описание использованных в программе функций
ввода/вывода scanf и printf.
2. Вторая строка. Программа на C++ состоит из функций. Одна из
функций должна иметь имя main. Выполнение программы начинается
с первого оператора этой функции. Если функция не должна
возвращать значение, указывается тип void.
3. Третья строка. Тело функции начинается с фигурной скобки.
4. Четвертая строка. Описание локальных переменных целого типа a,
b, s.
5. Тело функции main состоит из отдельных операторов (команд) – 5, 6 и
7 строки. Каждый оператор заканчивается точкой с запятой.
6. Восьмая строка. Тело функции заканчивается фигурной скобкой.
1.4. Комментарии
Кроме конструкций языка, программа может содержать комментарии.
Комментарий либо начинается с двух символов // и заканчивается символом
перехода на новую строку, либо заключается между символами-скобками /*
и */. Внутри комментария можно использовать любые допустимые на
данном компьютере символы, а не только символы из алфавита C++.
1.5. Константы и переменные
Данные, которыми оперирует программа, могут быть определены в ней
как неизменные, либо как способные изменять свое значение. Первые
называются константами, а вторые переменными. И переменные и константы
размещаются в памяти компьютера. Перед использованием любая
переменная должна быть описана.
Общий вид оператора описания переменных:
[класс памяти][const]тип имя [инициализатор]
Здесь и далее в квадратных скобках ([]) будем писать необязательный
параметр.
Рассмотрим правила задания составных частей этого оператора:
Необязательный класс памяти может принимать одно из значений auto,
extern, static и register. О них расскажем позже.
Модификатор const показывает, что значение переменной изменять нельзя.
Такую переменную называют константой.
При описании можно присвоить переменной начальное значение, это
называется инициализацией. Инициализатор можно записывать в двух
формах – со знаком равенства (=значение) или в круглых скобках
(значение).
Примеры
const int n=10; const float g=9.81;
int a=20,b,s;
float x(17),f;
Если тип инициализирующего значения не совпадает с типом переменной,
выполняются преобразования типов по определенным правилам.
Операция приведения типов записывается в двух формах:
тип (выражение)
(тип) выражение
Результатом операции является значение заданного типа, например
int x=17, a;
float y=3.14; double z;
a=(int)y; z=double(x);
Область действия переменного – это часть программы, в которой его можно
использовать для доступа к связанной с ним области памяти. В зависимости
от области действия переменная может быть локальной или глобальной. Если
переменная определена внутри блока (блок ограничен фигурными скобками),
она называется локальной, область ее действия – от точки описания до
конца блока, включая все вложенные блоки. Если переменная определена вне
любого блока, она называется глобальной и областью ее действия
считается файл, в котором она определена, от точки описания до его конца.
1.6. Оператор простого присваивания
Оператор присваивания придает переменной конкретное значение,
например:
x=2008; y=x+1; z=sin(M_PI/x);
Присваивание заполняет участок памяти, отведенный для переменной, новым
значением, одновременно уничтожая старое.
Общая схема оператора присваивания:
<имя>=<выражение>;
Все приведенные примеры укладываются в эту схему, т.к. и постоянные
величины, и переменные являются частным случаем выражения.
1.7. Операторы ввода и вывода данных
Программы форматированного ввода и вывода содержатся в
стандартной библиотеке и доступны после включения файла <stdio.h>.
Оператор
printf(format_string [,arguments…]);
осуществляет печать данных на стандартный вывод в соответствии с
указанным форматом представления данных. Формат представляет собой
строковую константу, содержащую объекты двух типов: обычные символы,
которые просто копируются в выходной поток, и спецификации
преобразования, каждая из которых вызывает преобразование и печать
очередного аргумента.
Спецификация формата в общем виде
%[flags][width][.precision][F|N][h|l|L] type
Спецификации преобразования (type)
Символ Тип аргумента Выводной формат
d целое десятичное целое со знаком
i целое десятичное, восьмеричное, шестнадца-
теричное целое со знаком
u целое десятичное целое без знака
o целое восьмеричное целое без знака
x целое шестнадцатеричное целое без знака,
использующее a,b,c,b,d,e,f
X целое шестнадцатеричное целое без знака,
использующее A,B,C,D,E,F
f с плавающей точкой значение со знаком в формате
[-]dddd.dddd, d – десятичная цифра
e с плавающей точкой [-]d.dddde[+|-]ddd
E с плавающей точкой [-]d.ddddE[+|-]ddd
G с плавающей точкой e или f в зависимости от того, какой
из них компактен для данного значения
G с плавающей точкой E или F
c символ одиночный символ
s строка cимволы печатаются до первого символа
’\0’ или до тех пор пока не будет
напечатано precision символов
p Значение вида
xxxx:yyyy
(сегмент:смещение)
указатель на указатель far на void.
x,y – прописные шестнадцатеричные
цифры.
Флаг Действие флага По умолчанию
- выравнивание по левой границе выравнивание по
правой границе
+ со знаком знак только для
отрицательных
пробел добавляет префикс пробел пробел не
добавляется
# если o,x,X добавляет префикс: 0,
0x, 0X
если e,E,f выводное значение будет
содержать десятичную точку во всех
случаях
нет префикса
Префиксы F и N должны использоваться только с символами типа ”s” и ”p”,
поскольку они относятся к аргументам, которые передают указатели:
F –используется для печати значений, которые были объявлены как far в
малой модели памяти;
N - используется для печати значений near в средней, большой и
сверхбольшой моделях памяти.
Префиксы h и l используются для указания того, что тип аргумента
short int и long int, а L – long double.
Пример
#include <stdio.h>;
#include <math.h>; // подключаем математические функции
void main()
{ int a, b, s; float x,y, pi;
printf("a b="); scanf("%i%i",&a,&b);
 s=a+b;
 printf("s=%i\n",s);
printf("s=%6i\n",s); // длина поля вывода=6
pi=M_PI;
printf("pi=%e\n",pi);
printf("pi=%E\n",pi);
printf("pi=+%e\n",pi); // печать со знаком
printf("pi=%8.3f\n",pi); // длина поля вывода=8, точность=3
printf("pi=%.3f\n",pi); // точность=3
}
Если мы введем a=17 и b=5, то на экране получим
s=22
s=ᴗᴗᴗᴗ22 // печатается в 6 позициях выравнивая по правой границе
pi=3.141593e+00
pi=3.141593E+00
pi=+3.141593e+00
pi=ᴗᴗᴗ3.142
pi=3.142
Здесь символы ᴗ означают пробел.
Аналогично функция
scanf(format_string [,arguments…]);
осуществляет ввод данных из стандартного ввода и преобразование их во
внутреннее представление в программе.
Спецификация формата в общем виде
%[*][width][F|N][h|l|L] type
Спецификации преобразования функции scanf практически полностью
совпадают со спецификациями преобразования функции printf.
Аргументами программы ввода могут быть только простые
переменные или имена символьных массивов для ввода символьных строк,
причем перед именами простых переменных обязательно должен стоять знак
амперсенд (& - операция получения адреса объекта).
При выполнении оператора scanf программа останавливается и ждет,
пока нужное количество чисел не будет введено с клавиатуры. Вводимые
числа разделяют пробелами или нажатием клавиши Enter. Заканчивается
ввод всегда нажатием клавиши Enter.
Например, после выполнения оператора scanf(”%i%f%f”,&a,&b,&c),
если на клавиатуре набраны числа 3 4.0 -5.025, переменные a, b, c
примут значения a=3, b=4, c=-5.025.
Если за символом процента (%) следует символ, который не является
символом управления форматом, этот символ и все следующие символы
рассматриваются как обычная последовательность символов, т.е.
последовательность символов, которая должна совпадать с вводом.
Звездочка (*), следующая за символом процент, подавляет
присваивание следующего входного поля, которое интерпретируется как
поле указанного типа. Поле читается, но не сохраняется.